---
date: 2017-05-31 23:18:00
title: golang中new和make简析
categories:
    - golang
tags:
    - golang,new,make
---

## 引言：
　　目前简单梳理了golang的知识点，进行查漏补缺，这里简要记录下golang中的make和new，由于个人能力有限，如有错误，欢迎指正。
　　
## 正文：
	1. make 分配了一个有初始值（非零）的T类型（我这里打印的为空，个人理解为空值）返回值 当slice cap无法满足需要，则在初始大小cap（即第三个参数，这里为6），成倍增长
	2. new 分配了零值填充的T类型的内存空间，并返回其地址（指针） 当slice cap无法满足需要，则以16为基数，成倍增长
	
测试代码如下：
    ```
        package main
        
        import "fmt"
        
        //make 分配了一个有初始值（非零）的T类型（我这里打印的为空，个人理解为空值）返回值 当slice cap无法满足需要，则在初始大小cap（即第三个参数，这里为6），成倍增长
        //new 分配了零值填充的T类型的内存空间，并返回其地址（指针） 当slice cap无法满足需要，则以16为基数，成倍增长
        func main() {
        	a := make([]int, 2, 6)
        	b := new([]int)
        	fmt.Println("a:", a, len(a), cap(a))
        	fmt.Println("b", b, *b, len(*b), cap(*b))
        	for i := 0; i < 10; i++ { //i < 10,i <20
        		a = append(a, 2)
        		*b = append(*b, 2)
        	}
        	fmt.Println("=======================================")
        	fmt.Println("a:", a, len(a), cap(a))
        	fmt.Println("b:", b, *b, len(*b), cap(*b))
        }
    ```
执行结果如下：

    ```
        //当 i < 10
        // a: [0 0] 2 6
        // b &[] [] 0 0
        // =======================================
        // a: [0 0 2 2 2 2 2 2 2 2 2 2] 12 12
        // b: &[2 2 2 2 2 2 2 2 2 2] [2 2 2 2 2 2 2 2 2 2] 10 16
        //当 i < 20
        // a: [0 0] 2 6
        // b &[] [] 0 0
        // =======================================
        // a: [0 0 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2] 22 24
        // b: &[2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2] [2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2] 20 32
    ```

## 附录
读书，学习是对自己最好的投资。
